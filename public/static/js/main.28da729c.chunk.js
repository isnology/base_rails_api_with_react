(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,n,t){e.exports=t(54)},54:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(24),i=t.n(o),l=t(7),c=t(8),s=t(10),u=t(9),m=t(11),p=t(56),d=t(58),f=t(57),h=t(6),g=t.n(h);function v(e){e?g.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete g.a.defaults.headers.common.Authorization}g.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:""}).API_SERVER_URL});var E=t(16),w=t.n(E),b="userToken";function O(e){e?localStorage.setItem(b,e):localStorage.removeItem(b)}function S(){var e=localStorage.getItem(b);try{var n=w()(e);return Date.now()/1e3>n.exp?null:e}catch(t){return null}}function k(){var e=S();return e?w()(e):null}function y(e){return e.headers.authorization.split(" ")[1]}var j=t(55);var I=function(e){var n,t=e.children,a=e.onClick,o=e.Route,i=void 0!==o&&o,l=e.Display,c=void 0!==l&&l,s=e.New,u=void 0!==s&&s,m=e.Update,p=void 0!==m&&m,d=e.Delete;return n=i?"route":c?"display":u?"new":p?"update":void 0!==d&&d?"delete":"route",r.a.createElement("button",{className:"Button ".concat(n),onClick:a},t)},C=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).state={signUp:!1},t.onFormClick=function(e){e.preventDefault();var n=e.target.elements,a={user:{email:n.email.value,password:n.password.value}};return t.state.signUp?(a.user.password_confirmation=n.passwordConfirmation.value,function(e){return v(S()),g.a.post("api/users",e).then(function(e){return O(y(e)),k()})}(a).then(function(e){return t.props.onSignInResponse(e)})):function(e){return v(S()),g.a.post("api/users/sign_in",e).then(function(e){return O(y(e)),k()}).catch(function(e){throw/ 401/.test(e.message)&&(e=new Error("The email/password combination was incorrect")),e})}(a).then(function(e){return t.props.onSignInResponse(e)})},t.onClick=function(){t.setState({signUp:!t.state.signUp})},t}return Object(m.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props.signedIn,n=this.state.signUp;return e?r.a.createElement(j.a,{to:"/app"}):r.a.createElement(a.Fragment,null,r.a.createElement("form",{onSubmit:this.onFormClick},r.a.createElement("div",{className:"form-label"},r.a.createElement("label",null,"Email: ",r.a.createElement("input",{type:"email",name:"email",defaultValue:""}))),r.a.createElement("div",{className:"form-label"},r.a.createElement("label",null,"Password: ",r.a.createElement("input",{type:"password",name:"password",defaultValue:""}))),n&&r.a.createElement("div",{className:"form-label"},r.a.createElement("label",null,"Re-type Password: ",r.a.createElement("input",{type:"password",name:"passwordConfirmation",defaultValue:""}))),r.a.createElement("br",null),r.a.createElement(I,{New:!0},"Sign ",n&&"Up"," ",!n&&"In")),r.a.createElement(I,{Route:!0,onClick:this.onClick},n&&"Back to Sign In"," ",!n&&"Sign Up"))}}]),n}(a.Component),R=function(e){function n(){return Object(l.a)(this,n),Object(s.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this.props,n=e.signedIn,t=e.onSignOut;return n?r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"Signed in"),r.a.createElement(I,{Delete:!0,onClick:t},"Sign Out")):r.a.createElement(j.a,{to:"/"})}}]),n}(a.Component),U=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).state={user:k()},t.onSignOut=function(){(v(S()),g.a.delete("api/users/sign_out").then(function(e){return O(null),null})).then(function(e){t.setState({user:null})}).catch(function(e){e.status(404).json(e)})},t.onSignInResponse=function(e){t.setState({user:e})},t}return Object(m.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this,n=!!this.state.user;return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null,r.a.createElement(f.a,{path:"/",exact:!0,render:function(){return r.a.createElement(C,{signedIn:n,onSignInResponse:e.onSignInResponse})}}),r.a.createElement(f.a,{path:"/app",exact:!0,render:function(){return r.a.createElement(R,{signedIn:n,onSignOut:e.onSignOut})}}))))}},{key:"componentWillMount",value:function(){}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.28da729c.chunk.js.map